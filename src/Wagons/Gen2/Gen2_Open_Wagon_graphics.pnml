/*
 *  Copyright (C) 2025 althonos
 *  Copyright (C) 2017 Transportman
 *  This file is part of the 2cc Trains In NML - Narrow Gauge edition
 *  This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation; either version 2 of the License, or (at your option) any later version.
 *  This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
 *  You should have received a copy of the GNU General Public License along with this program; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
*/

#define GEN2_OPEN_LIVERY(NAME, L, OFFSET) \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S1, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 1) \
	} \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S2, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 32) \
	} \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S3, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 64) \
	} \
	spritegroup spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L { \
		loading: [spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S1, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S2, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S3]; \
		loaded: [spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S1, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S2, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S3]; \
	}

#define GEN2_OPEN_LIVERY_COVERED(NAME, L, OFFSET) \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S1, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 1) \
	} \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S2, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 32) \
	} \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S3, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 64) \
	} \
	spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S4, format_string("gfx/Wagons/Gen2/Gen2_Open_Wagon_%s.png", #NAME)) { \
		template_2cc_wagons(OFFSET, 96) \
	} \
	spritegroup spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L { \
		loading: [spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S1, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S2, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S3]; \
		loaded: [spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S1, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S4, spriteset_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _ ## L ## _S4]; \
	}

#define GEN2_OPEN_WAGON(NAME) \
	GEN2_OPEN_LIVERY(NAME, L1, 1) \
	GEN2_OPEN_LIVERY(NAME, L2, 179) \
	GEN2_OPEN_LIVERY(NAME, L3, 357) \
	GEN2_OPEN_LIVERY(NAME, L4, 535) \
	random_switch(FEAT_TRAINS, SELF, switch_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _livery) { \
		7: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L1; \
		1: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L2; \
		1: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L3; \
		1: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L4; \
	}

#define GEN2_OPEN_WAGON_COVERED(NAME) \
	GEN2_OPEN_LIVERY_COVERED(NAME, L1, 1) \
	GEN2_OPEN_LIVERY_COVERED(NAME, L2, 179) \
	GEN2_OPEN_LIVERY_COVERED(NAME, L3, 357) \
	GEN2_OPEN_LIVERY_COVERED(NAME, L4, 535) \
	random_switch(FEAT_TRAINS, SELF, switch_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _livery) { \
		7: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L1; \
		1: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L2; \
		1: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L3; \
		1: spritegroup_wagon_Narrow_Gen2_Open_Wagon_ ## NAME ## _L4; \
	}

/*
* CARGO VARIATIONS
*/

GEN2_OPEN_WAGON(Coal)
GEN2_OPEN_WAGON(Gray)
GEN2_OPEN_WAGON(Maize)
GEN2_OPEN_WAGON(Ore)
GEN2_OPEN_WAGON(Sand)
// WAGON_BULK(Crates)
// WAGON_BULK(Wood)
// WAGON_BULK(Peat)

GEN2_OPEN_WAGON_COVERED(Carbon)
GEN2_OPEN_WAGON_COVERED(Grain)
GEN2_OPEN_WAGON_COVERED(Kaolin)
// WAGON_BULK(Clay)

/*
* PURCHASE
*/

spriteset(spriteset_wagon_Narrow_Gen2_Open_Wagon_purchase, "gfx/Wagons/Gen2/Gen2_Open_Wagon_Purchase.png") {
	template_purchase_wagon(1, 1)
}

switch(FEAT_TRAINS, SELF, switch_wagon_Narrow_Gen2_Open_Wagon_cargo_selection, cargo_type_in_veh) {
	/* Black cargo */
	COAL: switch_wagon_Narrow_Gen2_Open_Wagon_Coal_livery;	// Coal
	SLAG: switch_wagon_Narrow_Gen2_Open_Wagon_Coal_livery;	// Slag
	COKE: switch_wagon_Narrow_Gen2_Open_Wagon_Coal_livery;	// Coke

	/* Black cargo, carbon */
	CBLK: switch_wagon_Narrow_Gen2_Open_Wagon_Carbon_livery;  // Carbon black

	/* Ore cargo */
	IORE: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Iron ore
	MNO2: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Manganese ore
	CORE: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Copper ore
	AORE: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Bauxite ore
	PORE: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Pyrite ore
	FECR: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Ferrochrome

	/* Ore (greenish) cargo */
	URAN: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Uranium ore
	NKOR: switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery;	// Nickel ore

	/* Wood cargo */
	// WOOD: switch_wagon_Narrow_Gen2_Open_Wagon_Wood_livery;  // Wood

	/* Metal cargo */
	// SCMT: switch_wagon_Narrow_Gen2_Open_Wagon_Metal_livery; // Scrap metal
	// RCYC: switch_wagon_Narrow_Gen2_Open_Wagon_Metal_livery; // Recyclables
	
	/* Crate cargo */
	// SUGR: switch_wagon_Narrow_Gen2_Open_Wagon_Crates_livery;	// Sugar
	// CTCD: switch_wagon_Narrow_Gen2_Open_Wagon_Crates_livery;	// Candyfloss
	// CERE: switch_wagon_Narrow_Gen2_Open_Wagon_Crates_livery;	// Cereal
	// FICR: switch_wagon_Narrow_Gen2_Open_Wagon_Crates_livery;	// Fibre Crop
	// OLSD: switch_wagon_Narrow_Gen2_Open_Wagon_Crates_livery;	// Oil Seed
	// FURN: switch_wagon_Narrow_Gen2_Open_Wagon_Crates_livery;	// Furniture

	/* Sand cargo */
	PHOS: switch_wagon_Narrow_Gen2_Open_Wagon_Sand_livery;  // Phosphate
	SAND: switch_wagon_Narrow_Gen2_Open_Wagon_Sand_livery;	// Sand
	
	/* Gray cargo */
	GRVL: switch_wagon_Narrow_Gen2_Open_Wagon_Gray_livery;	// Gravel / Stone
	LIME: switch_wagon_Narrow_Gen2_Open_Wagon_Gray_livery;	// Limestone
	SALT: switch_wagon_Narrow_Gen2_Open_Wagon_Gray_livery;	// Salt
	NITR: switch_wagon_Narrow_Gen2_Open_Wagon_Gray_livery;	// Nitrate
	NHNO: switch_wagon_Narrow_Gen2_Open_Wagon_Gray_livery;	// Ammonium nitrate

	/* Gray cargo, covered */
	KAOL: switch_wagon_Narrow_Gen2_Open_Wagon_Kaolin_livery;  // Kaolin
	CMNT: switch_wagon_Narrow_Gen2_Open_Wagon_Kaolin_livery;  // Cement
	BAKE: switch_wagon_Narrow_Gen2_Open_Wagon_Kaolin_livery;  // Flour
	QLME: switch_wagon_Narrow_Gen2_Open_Wagon_Kaolin_livery;  // Quicklime
	SASH: switch_wagon_Narrow_Gen2_Open_Wagon_Kaolin_livery;  // Soda Ash

	/* Light brown & green cargo */
	// FRUT: switch_wagon_Narrow_Gen2_Open_Wagon_Fruit_livery;	// Fruit
	// CASS: switch_wagon_Narrow_Gen2_Open_Wagon_Fruit_livery;  // Cassava
	// BEAN: switch_wagon_Narrow_Gen2_Open_Wagon_Fruit_livery;  // Beans

	/* Light brown & green cargo, covered */
	// SGCN: switch_wagon_Narrow_Gen2_Open_Wagon_Beet_livery;	// Sugar cane
	// SGBT: switch_wagon_Narrow_Gen2_Open_Wagon_Beet_livery;	// Sugar beet

	/* Brown cargo */
	// PEAT: switch_wagon_Narrow_Gen2_Open_Wagon_Peat_livery;	// Peat
	// FERT: switch_wagon_Narrow_Gen2_Open_Wagon_Peat_livery;	// Fertilizer
	// TBCO: switch_wagon_Narrow_Gen2_Open_Wagon_Peat_livery;	// Tobacco
	// TOFF: switch_wagon_Narrow_Gen2_Open_Wagon_Peat_livery;	// Toffee

	/* Brown cargo, covered */
	// CLAY: switch_wagon_Narrow_Gen2_Open_Wagon_Clay_livery;  // Clay
	// POTA: switch_wagon_Narrow_Gen2_Open_Wagon_Clay_livery;  // Potash
	// WSTE: switch_wagon_Narrow_Gen2_Open_Wagon_Clay_livery;  // Waste

	/* Light-brown cargo, covered */
	GRAI: switch_wagon_Narrow_Gen2_Open_Wagon_Grain_livery;	 // Grains
	WHEA: switch_wagon_Narrow_Gen2_Open_Wagon_Grain_livery;  // Wheat
	SEED: switch_wagon_Narrow_Gen2_Open_Wagon_Grain_livery;  // Seed
	CERE: switch_wagon_Narrow_Gen2_Open_Wagon_Grain_livery;	 // Cereals
	
	/* Yellow cargo */
	MAIZ: switch_wagon_Narrow_Gen2_Open_Wagon_Maize_livery;	 // Maize

	/* Yellow cargo, covered */
	// SULP: switch_wagon_Narrow_Gen2_Open_Wagon_Sulphur_livery;  // Sulphur
	
	/* Default */
	switch_wagon_Narrow_Gen2_Open_Wagon_Ore_livery; 
}

//Add defined switches 

ENGINECAPACITYSWITCH(VEHIDCODE)

RUNNINGCOSTENGINESWITCH

PURCHASETEXTSWITCH